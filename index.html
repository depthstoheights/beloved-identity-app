<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Beloved Identity - Your Foundation in Christ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --primary: #6B46C1;
            --secondary: #9F7AEA;
            --accent: #FAF5FF;
            --gold: #F6AD55;
            --text: #2D3748;
            --light-text: #718096;
            --white: #FFFFFF;
            --danger: #E53E3E;
            --success: #48BB78;
            --gradient: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            --soft-gradient: linear-gradient(135deg, #FAF5FF 0%, #EDE9FE 100%);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--soft-gradient);
            min-height: 100vh;
            color: var(--text);
            overflow-x: hidden;
            padding-bottom: 70px;
        }

        .screen {
            display: none;
            min-height: calc(100vh - 70px);
            padding: 20px;
            animation: fadeIn 0.4s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
        }

        /* Back Button */
        .back-button {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            transition: all 0.3s;
            font-size: 0.95em;
        }

        .back-button:hover {
            background: var(--primary);
            color: white;
            transform: translateX(-3px);
        }

        /* Opening Screen */
        .opening-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px 20px;
            background: var(--gradient);
            color: white;
            min-height: 100vh;
            margin: -20px;
        }

        .crown-icon {
            font-size: 80px;
            margin-bottom: 30px;
            animation: pulse 3s ease-in-out infinite;
        }

        .opening-screen h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .opening-screen p {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
            opacity: 0.95;
            max-width: 500px;
        }

        .verse-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            max-width: 500px;
        }

        .verse-card cite {
            display: block;
            margin-top: 10px;
            font-style: italic;
            opacity: 0.9;
        }

        /* Dashboard */
        .dashboard-header {
            background: var(--gradient);
            margin: -20px -20px 25px;
            padding: 35px 20px;
            color: white;
            text-align: center;
            border-radius: 0 0 25px 25px;
        }

        .dashboard-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .identity-card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            text-align: center;
        }

        .identity-card h3 {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .daily-affirmation {
            background: var(--accent);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--gold);
        }

        .daily-affirmation p {
            font-size: 1.1em;
            line-height: 1.6;
            font-style: italic;
        }

        .daily-affirmation cite {
            display: block;
            text-align: right;
            margin-top: 10px;
            color: var(--primary);
            font-weight: 600;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 25px rgba(107, 70, 193, 0.15);
            border-color: var(--secondary);
        }

        .feature-card .icon {
            font-size: 40px;
            margin-bottom: 10px;
            display: block;
        }

        .feature-card h4 {
            font-size: 0.95em;
            color: var(--text);
            font-weight: 600;
        }

        /* Content Sections */
        .content-header {
            background: var(--gradient);
            margin: -20px -20px 25px;
            padding: 30px 20px;
            color: white;
            text-align: center;
            border-radius: 0 0 25px 25px;
        }

        .content-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            margin-bottom: 8px;
        }

        .content-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
        }

        .content-card h3 {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .scripture-box {
            background: var(--accent);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid var(--gold);
        }

        .scripture-box p {
            font-style: italic;
            line-height: 1.6;
        }

        .scripture-box cite {
            display: block;
            text-align: right;
            margin-top: 10px;
            color: var(--primary);
            font-weight: 600;
            font-size: 0.95em;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #E2E8F0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(159, 122, 234, 0.1);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* Buttons */
        .btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(107, 70, 193, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-gold {
            background: linear-gradient(135deg, #F6AD55 0%, #ED8936 100%);
        }

        .btn-full {
            width: 100%;
        }

        /* Identity Mapping */
        .mapping-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .mapping-container {
                grid-template-columns: 1fr;
            }
        }

        .mapping-column {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .mapping-column h4 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .mapping-item {
            background: var(--accent);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            position: relative;
            cursor: move;
            transition: all 0.3s;
        }

        .mapping-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 10px rgba(107, 70, 193, 0.15);
        }

        .truth-item {
            background: linear-gradient(135deg, #FAF5FF 0%, #EDE9FE 100%);
            border-left: 3px solid var(--gold);
        }

        /* Progress Tracker */
        .progress-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
        }

        .progress-bar {
            background: #E2E8F0;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: var(--gradient);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: var(--accent);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
        }

        .stat-card .label {
            font-size: 0.85em;
            color: var(--light-text);
            margin-top: 5px;
        }

        /* Journal Entries */
        .journal-entry {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 3px solid var(--gold);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .journal-entry .date {
            font-size: 0.85em;
            color: var(--light-text);
            margin-bottom: 10px;
        }

        .journal-entry .content {
            line-height: 1.6;
        }

        .journal-entry .delete-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 0.85em;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Counselor List */
        .counselor-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-left: 4px solid var(--gold);
        }

        .counselor-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .counselor-card p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .counselor-card .contact-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .counselor-card .contact-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        /* Audio Toggle */
        .audio-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            cursor: pointer;
            z-index: 999;
            transition: all 0.3s;
        }

        .audio-toggle:hover {
            transform: scale(1.1);
        }

        .audio-toggle.playing {
            background: var(--primary);
            color: white;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 70px;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--light-text);
        }

        .nav-item:hover {
            color: var(--primary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item .icon {
            font-size: 24px;
            display: block;
            margin-bottom: 5px;
        }

        .nav-item .label {
            font-size: 0.75em;
            font-weight: 600;
        }

        /* Messages */
        .message {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .message.success {
            background: #C6F6D5;
            color: #22543D;
            border-left: 4px solid var(--success);
        }

        .message.info {
            background: #BEE3F8;
            color: #2C5282;
            border-left: 4px solid #3182CE;
        }

        .message.warning {
            background: #FEEBC8;
            color: #7C2D12;
            border-left: 4px solid #DD6B20;
        }

        /* Family Resources */
        .resource-card {
            background: linear-gradient(135deg, #FAF5FF 0%, #EDE9FE 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 2px solid var(--secondary);
        }

        .resource-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
            font-family: 'Playfair Display', serif;
        }

        .resource-card ul {
            list-style: none;
            padding-left: 0;
        }

        .resource-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(107, 70, 193, 0.1);
        }

        .resource-card li:last-child {
            border-bottom: none;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .opening-screen h1 {
                font-size: 2em;
            }
            
            .dashboard-header h2 {
                font-size: 1.5em;
            }
            
            .feature-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Audio Toggle -->
    <div class="audio-toggle" id="audioToggle">
        <span id="audioIcon">🎵</span>
    </div>

    <!-- Audio Element -->
    <audio id="backgroundAudio" loop>
        <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=" type="audio/wav">
    </audio>

    <!-- Opening Screen -->
    <div class="screen active" id="openingScreen">
        <div class="opening-screen">
            <div class="crown-icon">👑</div>
            <h1>Beloved Identity</h1>
            <p>Discover who you truly are in Christ</p>
            
            <div class="verse-card">
                <p>"I praise you because I am fearfully and wonderfully made; your works are wonderful, I know that full well."</p>
                <cite>- Psalm 139:14</cite>
            </div>
            
            <p>Your identity is not defined by your feelings, struggles, or questions. It's rooted in God's eternal truth about who He created you to be.</p>
            
            <button class="btn btn-full" onclick="startJourney()">Begin Your Identity Journey</button>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="screen" id="dashboard">
        <div class="dashboard-header">
            <h2>Welcome, Beloved</h2>
            <p id="dashboardDate"></p>
        </div>

        <div class="identity-card">
            <h3>Today's Identity Truth</h3>
            <div class="daily-affirmation" id="dailyAffirmation">
                <!-- Daily affirmation will be loaded here -->
            </div>
            <button class="btn btn-gold" onclick="getNewAffirmation()">New Affirmation</button>
        </div>

        <div class="progress-container">
            <h3>Your Identity Journey</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="number" id="daysCount">0</div>
                    <div class="label">Days</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="truthsCount">0</div>
                    <div class="label">Truths</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="journalCount">0</div>
                    <div class="label">Journals</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="questionsCount">0</div>
                    <div class="label">Questions</div>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h3>Explore Your Identity</h3>
            <div class="feature-grid">
                <div class="feature-card" onclick="showScreen('whoAmI')">
                    <span class="icon">✨</span>
                    <h4>Who Am I?</h4>
                </div>
                <div class="feature-card" onclick="showScreen('identityMapping')">
                    <span class="icon">🗺️</span>
                    <h4>Identity Map</h4>
                </div>
                <div class="feature-card" onclick="showScreen('godsDesign')">
                    <span class="icon">🎨</span>
                    <h4>God's Design</h4>
                </div>
                <div class="feature-card" onclick="showScreen('safeSpace')">
                    <span class="icon">💭</span>
                    <h4>Safe Space</h4>
                </div>
                <div class="feature-card" onclick="showScreen('counselors')">
                    <span class="icon">🤝</span>
                    <h4>Counselors</h4>
                </div>
                <div class="feature-card" onclick="showScreen('familyResources')">
                    <span class="icon">👨‍👩‍👧‍👦</span>
                    <h4>For Parents</h4>
                </div>
            </div>
        </div>
    </div>

    <!-- Who Am I in Christ -->
    <div class="screen" id="whoAmI">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>Who Am I in Christ?</h2>
            <p>Your true identity according to Scripture</p>
        </div>

        <div class="content-card">
            <h3>You Are Chosen</h3>
            <div class="scripture-box">
                <p>"But you are a chosen people, a royal priesthood, a holy nation, God's special possession, that you may declare the praises of him who called you out of darkness into his wonderful light."</p>
                <cite>1 Peter 2:9</cite>
            </div>
            <p>Before the foundation of the world, God chose you. You are not an accident or a mistake. You are intentionally and purposefully selected by the Creator of the universe.</p>
        </div>

        <div class="content-card">
            <h3>You Are Loved</h3>
            <div class="scripture-box">
                <p>"See what great love the Father has lavished on us, that we should be called children of God! And that is what we are!"</p>
                <cite>1 John 3:1</cite>
            </div>
            <p>God's love for you is not based on your performance, appearance, or achievements. It is unconditional, unchanging, and eternal.</p>
        </div>

        <div class="content-card">
            <h3>You Are Forgiven</h3>
            <div class="scripture-box">
                <p>"If we confess our sins, he is faithful and just and will forgive us our sins and purify us from all unrighteousness."</p>
                <cite>1 John 1:9</cite>
            </div>
            <p>Your past does not define you. In Christ, you are completely forgiven and made new. Your identity is not in what you've done, but in what He has done for you.</p>
        </div>

        <div class="content-card">
            <h3>You Are Purposeful</h3>
            <div class="scripture-box">
                <p>"For we are God's handiwork, created in Christ Jesus to do good works, which God prepared in advance for us to do."</p>
                <cite>Ephesians 2:10</cite>
            </div>
            <p>You were created with intention and purpose. God has specific plans and works prepared just for you.</p>
        </div>

        <div class="content-card">
            <h3>Personal Reflection</h3>
            <div class="form-group">
                <label>Which truth about your identity speaks most to you today?</label>
                <textarea id="identityReflection" placeholder="Write your thoughts here..."></textarea>
            </div>
            <button class="btn btn-full" onclick="saveIdentityReflection()">Save Reflection</button>
        </div>
    </div>

    <!-- Identity Mapping -->
    <div class="screen" id="identityMapping">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>Identity Mapping</h2>
            <p>Separate feelings from eternal truth</p>
        </div>

        <div class="content-card">
            <h3>Understanding the Difference</h3>
            <p>Our feelings are real and valid, but they are not always true. God's Word provides the unchanging truth about who we are, regardless of how we feel in any given moment.</p>
        </div>

        <div class="mapping-container">
            <div class="mapping-column">
                <h4>What I Feel</h4>
                <div class="mapping-item">I feel unworthy</div>
                <div class="mapping-item">I feel rejected</div>
                <div class="mapping-item">I feel like a failure</div>
                <div class="mapping-item">I feel unloved</div>
                <div class="mapping-item">I feel confused</div>
                <div class="mapping-item">I feel purposeless</div>
            </div>
            
            <div class="mapping-column">
                <h4>What God Says</h4>
                <div class="mapping-item truth-item">I am worthy through Christ (Romans 5:8)</div>
                <div class="mapping-item truth-item">I am accepted (Romans 15:7)</div>
                <div class="mapping-item truth-item">I am more than a conqueror (Romans 8:37)</div>
                <div class="mapping-item truth-item">I am deeply loved (Jeremiah 31:3)</div>
                <div class="mapping-item truth-item">God gives wisdom freely (James 1:5)</div>
                <div class="mapping-item truth-item">I am created for good works (Ephesians 2:10)</div>
            </div>
        </div>

        <div class="content-card">
            <h3>Create Your Personal Map</h3>
            <div class="form-group">
                <label>What feelings are you struggling with?</label>
                <input type="text" id="feelingInput" placeholder="I feel...">
            </div>
            <div class="form-group">
                <label>What truth from Scripture counters this?</label>
                <input type="text" id="truthInput" placeholder="God says I am...">
            </div>
            <button class="btn btn-full" onclick="addToMap()">Add to My Map</button>
            
            <div id="personalMap" style="margin-top: 20px;"></div>
        </div>

        <div class="content-card">
            <h3>Remember This Truth</h3>
            <div class="scripture-box">
                <p>"We demolish arguments and every pretension that sets itself up against the knowledge of God, and we take captive every thought to make it obedient to Christ."</p>
                <cite>2 Corinthians 10:5</cite>
            </div>
        </div>
    </div>

    <!-- God's Design -->
    <div class="screen" id="godsDesign">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>Before I Formed You</h2>
            <p>Discovering God's original design and purpose</p>
        </div>

        <div class="content-card">
            <h3>You Were Planned</h3>
            <div class="scripture-box">
                <p>"Before I formed you in the womb I knew you, before you were born I set you apart."</p>
                <cite>Jeremiah 1:5</cite>
            </div>
            <p>Your existence is not random. God knew you before you were formed, and He has a specific purpose for your life.</p>
        </div>

        <div class="content-card">
            <h3>Discover Your Design</h3>
            <p>Take time to explore how God has uniquely crafted you:</p>
            
            <div class="form-group">
                <label>What brings you joy?</label>
                <textarea id="joyInput" placeholder="What activities, experiences, or moments make you feel most alive?"></textarea>
            </div>
            
            <div class="form-group">
                <label>What are your natural gifts?</label>
                <textarea id="giftsInput" placeholder="What do others say you're good at? What comes naturally to you?"></textarea>
            </div>
            
            <div class="form-group">
                <label>What burdens your heart?</label>
                <textarea id="burdensInput" placeholder="What injustices or needs move you to action?"></textarea>
            </div>
            
            <div class="form-group">
                <label>What experiences have shaped you?</label>
                <textarea id="experiencesInput" placeholder="Both positive and difficult experiences that have formed who you are..."></textarea>
            </div>
            
            <button class="btn btn-full" onclick="saveDesignDiscovery()">Save My Discovery</button>
        </div>

        <div class="content-card">
            <h3>Your Unique Fingerprint</h3>
            <p>Just as no two fingerprints are alike, God has given you a unique combination of:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>🎁 Spiritual gifts to serve His Kingdom</li>
                <li>❤️ Passions that reflect His heart</li>
                <li>🎯 Abilities to accomplish His purposes</li>
                <li>🧠 Personality to relate to specific people</li>
                <li>📖 Experiences to minister to others</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Prayer of Discovery</h3>
            <div style="background: var(--accent); padding: 20px; border-radius: 10px; font-style: italic;">
                <p>Lord, reveal to me the purpose for which You created me. Show me how You've uniquely designed me to serve You and others. Help me embrace the way You've made me, trusting that Your design is perfect. Give me courage to walk in the purpose You've prepared for me. In Jesus' name, Amen.</p>
            </div>
            <button class="btn btn-secondary btn-full" style="margin-top: 15px;" onclick="copyPrayer()">Copy Prayer</button>
        </div>
    </div>

    <!-- Safe Space -->
    <div class="screen" id="safeSpace">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>Safe Space</h2>
            <p>Process identity questions without pressure</p>
        </div>

        <div class="content-card">
            <h3>This Is a Safe Place</h3>
            <p>It's okay to have questions about your identity. God is not threatened by your questions, doubts, or struggles. He invites you to bring everything to Him.</p>
            
            <div class="scripture-box">
                <p>"Cast all your anxiety on him because he cares for you."</p>
                <cite>1 Peter 5:7</cite>
            </div>
        </div>

        <div class="content-card">
            <h3>Questions You Might Be Asking</h3>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>Why do I feel this way?</li>
                <li>Am I normal?</li>
                <li>Will God still love me if...?</li>
                <li>What if I never figure this out?</li>
                <li>Why is my identity so confusing?</li>
                <li>Can I change how I feel?</li>
                <li>What does God think about my struggles?</li>
            </ul>
            
            <p style="margin-top: 20px; color: var(--primary); font-weight: 600;">
                Remember: Having questions doesn't mean you lack faith. It means you're human.
            </p>
        </div>

        <div class="content-card">
            <h3>Your Private Journal</h3>
            <p>This is your safe space to process. Everything you write here stays private on your device.</p>
            
            <div class="form-group">
                <label>What questions about your identity are you wrestling with?</label>
                <textarea id="questionsJournal" placeholder="Be honest. God already knows your heart..."></textarea>
            </div>
            
            <div class="form-group">
                <label>What fears do you have about your identity?</label>
                <textarea id="fearsJournal" placeholder="What are you afraid of..."></textarea>
            </div>
            
            <div class="form-group">
                <label>What do you wish someone would tell you?</label>
                <textarea id="wishJournal" placeholder="What do you need to hear..."></textarea>
            </div>
            
            <button class="btn btn-full" onclick="saveSafeSpaceJournal()">Save to Private Journal</button>
        </div>

        <div class="content-card">
            <h3>God's Promise to You</h3>
            <div class="scripture-box">
                <p>"The Lord is close to the brokenhearted and saves those who are crushed in spirit."</p>
                <cite>Psalm 34:18</cite>
            </div>
            <p>You don't have to have all the answers right now. God is patient, loving, and committed to walking with you through every question and struggle.</p>
        </div>

        <div class="content-card">
            <h3>Your Journal Entries</h3>
            <div id="safeSpaceEntries">
                <p style="color: var(--light-text); text-align: center;">No journal entries yet</p>
            </div>
        </div>
    </div>

    <!-- Counselors -->
    <div class="screen" id="counselors">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>Grace-Filled Counselors</h2>
            <p>Professional Christian support for identity questions</p>
        </div>

        <div class="content-card">
            <h3>You Don't Have to Walk Alone</h3>
            <p>Sometimes we need professional help to process our identity questions. Christian counselors who specialize in identity can provide:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>✓ Safe, confidential space to explore</li>
                <li>✓ Biblical wisdom combined with clinical expertise</li>
                <li>✓ Grace-filled support without judgment</li>
                <li>✓ Tools for understanding yourself</li>
                <li>✓ Guidance for your specific situation</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Finding the Right Counselor</h3>
            
            <div class="form-group">
                <label>Your Location (City, State/Country):</label>
                <input type="text" id="counselorLocation" placeholder="Enter your location...">
            </div>
            
            <div class="form-group">
                <label>Specific Areas of Concern:</label>
                <select id="counselorSpecialty">
                    <option value="">Select area...</option>
                    <option value="general">General Identity Questions</option>
                    <option value="gender">Gender Identity</option>
                    <option value="sexuality">Sexual Identity</option>
                    <option value="cultural">Cultural Identity</option>
                    <option value="adoption">Adoption/Family Identity</option>
                    <option value="trauma">Identity After Trauma</option>
                    <option value="faith">Faith and Identity Integration</option>
                </select>
            </div>
            
            <button class="btn btn-full" onclick="searchCounselors()">Find Counselors</button>
            
            <div id="counselorResults" style="margin-top: 20px;"></div>
        </div>

        <div class="content-card">
            <h3>Online Christian Counseling Options</h3>
            <div class="counselor-card">
                <h4>BetterHelp Christian Counseling</h4>
                <p>Online platform with licensed Christian therapists specializing in identity issues.</p>
                <button class="contact-btn" onclick="showCounselorInfo('betterhelp')">Learn More</button>
            </div>
            
            <div class="counselor-card">
                <h4>Faithful Counseling</h4>
                <p>Professional, faith-based online therapy for identity and life challenges.</p>
                <button class="contact-btn" onclick="showCounselorInfo('faithful')">Learn More</button>
            </div>
            
            <div class="counselor-card">
                <h4>Christian Counselors Network</h4>
                <p>Directory of certified Christian counselors worldwide.</p>
                <button class="contact-btn" onclick="showCounselorInfo('ccn')">Learn More</button>
            </div>
        </div>

        <div class="content-card">
            <h3>What to Expect</h3>
            <p>A grace-filled Christian counselor will:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>• Listen without judgment</li>
                <li>• Help you process your feelings and questions</li>
                <li>• Explore your identity through a biblical lens</li>
                <li>• Respect your journey and pace</li>
                <li>• Provide practical tools and strategies</li>
                <li>• Pray with and for you (if desired)</li>
                <li>• Maintain complete confidentiality</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Emergency Support</h3>
            <p style="color: var(--danger); font-weight: 600;">If you are in crisis, please reach out immediately:</p>
            <p>• Call your local emergency services</p>
            <p>• Contact your local crisis helpline</p>
            <p>• Reach out to a trusted friend, family member, or pastor</p>
            <p>• Go to your nearest emergency room</p>
            <p style="margin-top: 15px;">You are valuable, loved, and your life matters.</p>
        </div>
    </div>

    <!-- Family Resources -->
    <div class="screen" id="familyResources">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>For Parents & Families</h2>
            <p>Supporting your child's identity journey with love</p>
        </div>

        <div class="content-card">
            <h3>Parenting Through Identity Questions</h3>
            <p>If your child is questioning their identity, you might feel confused, scared, or unsure how to respond. Remember:</p>
            
            <div class="scripture-box">
                <p>"Love is patient, love is kind... It always protects, always trusts, always hopes, always perseveres."</p>
                <cite>1 Corinthians 13:4,7</cite>
            </div>
        </div>

        <div class="resource-card">
            <h4>Key Principles for Parents</h4>
            <ul>
                <li>💙 Lead with love, not fear</li>
                <li>👂 Listen more than you speak</li>
                <li>🤗 Keep the relationship as the priority</li>
                <li>📖 Ground yourself in God's Word</li>
                <li>🙏 Pray continuously for wisdom</li>
                <li>💭 Separate identity from behavior</li>
                <li>⏰ Give the journey time</li>
                <li>🤝 Seek support for yourself too</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Age-Appropriate Responses</h3>
            
            <h4 style="color: var(--primary); margin-top: 20px;">Young Children (5-10)</h4>
            <ul style="line-height: 1.8; margin-left: 20px;">
                <li>• Affirm God's love for them</li>
                <li>• Focus on their inherent value</li>
                <li>• Answer questions simply and honestly</li>
                <li>• Avoid adult complexities</li>
            </ul>
            
            <h4 style="color: var(--primary); margin-top: 20px;">Tweens (11-13)</h4>
            <ul style="line-height: 1.8; margin-left: 20px;">
                <li>• Normalize identity exploration</li>
                <li>• Provide safe boundaries</li>
                <li>• Encourage open communication</li>
                <li>• Share age-appropriate resources</li>
            </ul>
            
            <h4 style="color: var(--primary); margin-top: 20px;">Teens (14-18)</h4>
            <ul style="line-height: 1.8; margin-left: 20px;">
                <li>• Respect their process</li>
                <li>• Maintain connection over correction</li>
                <li>• Offer professional support if needed</li>
                <li>• Model unconditional love</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Conversation Starters</h3>
            <div class="resource-card">
                <h4>Questions to Ask Your Child</h4>
                <ul>
                    <li>"How are you feeling about yourself lately?"</li>
                    <li>"Is there anything you're wondering about that we could explore together?"</li>
                    <li>"What do you need from me right now?"</li>
                    <li>"How can I best support you?"</li>
                    <li>"What's been on your heart recently?"</li>
                    <li>"Is there anything you're afraid to tell me?"</li>
                </ul>
            </div>
        </div>

        <div class="content-card">
            <h3>When to Seek Help</h3>
            <p>Consider professional support if your child:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>• Shows signs of depression or anxiety</li>
                <li>• Expresses thoughts of self-harm</li>
                <li>• Withdraws from family and friends</li>
                <li>• Experiences significant distress</li>
                <li>• Asks for professional help</li>
                <li>• Needs support you feel unequipped to provide</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Resources for Parents</h3>
            
            <div class="resource-card">
                <h4>Recommended Books</h4>
                <ul>
                    <li>📚 "Guiding Families of LGBT+ Loved Ones" - Bill Henson</li>
                    <li>📚 "Understanding Gender Dysphoria" - Mark Yarhouse</li>
                    <li>📚 "Messy Grace" - Caleb Kaltenbach</li>
                    <li>📚 "Living in a Gray World" - Preston Sprinkle</li>
                </ul>
            </div>
            
            <div class="resource-card">
                <h4>Support Organizations</h4>
                <ul>
                    <li>• Center for Faith, Sexuality & Gender</li>
                    <li>• Posture Shift (for parents)</li>
                    <li>• Lead Them Home</li>
                    <li>• Reconciling Works</li>
                </ul>
            </div>
        </div>

        <div class="content-card">
            <h3>Prayer for Parents</h3>
            <div style="background: var(--accent); padding: 20px; border-radius: 10px; font-style: italic;">
                <p>Heavenly Father,<br><br>
                Give me wisdom to parent with Your love. Help me see my child through Your eyes - fearfully and wonderfully made. When I don't understand, give me patience. When I'm afraid, give me peace. Help me create a home where my child feels safe, loved, and valued. Guide our family through this journey, keeping us united in love. Show me how to point my child to You while respecting their process. In Jesus' name, Amen.</p>
            </div>
            <button class="btn btn-secondary btn-full" style="margin-top: 15px;" onclick="copyParentPrayer()">Copy Prayer</button>
        </div>
    </div>

    <!-- Crisis Screen -->
    <div class="screen" id="crisis">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header" style="background: linear-gradient(135deg, #E53E3E 0%, #FC8181 100%);">
            <h2>Crisis Support</h2>
            <p>You are not alone</p>
        </div>

        <div class="content-card" style="border: 3px solid var(--danger);">
            <h3 style="color: var(--danger);">Immediate Help Available</h3>
            <p><strong>If you are in crisis, please reach out for help immediately:</strong></p>
            <ul style="line-height: 2; margin: 20px;">
                <li>📞 Call your local emergency services</li>
                <li>💬 Text your local crisis text line</li>
                <li>🏥 Go to your nearest emergency room</li>
                <li>📱 Contact a trusted friend or family member</li>
            </ul>
            
            <div class="scripture-box">
                <p>"The Lord is near to the brokenhearted and saves the crushed in spirit."</p>
                <cite>Psalm 34:18</cite>
            </div>
        </div>

        <div class="content-card">
            <h3>You Matter</h3>
            <p>Please remember:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>✨ Your life has infinite value</li>
                <li>💜 You are deeply loved by God</li>
                <li>🌅 This pain is temporary</li>
                <li>🤲 Help is available</li>
                <li>💪 You are stronger than you know</li>
                <li>🕊️ There is hope, even when you can't see it</li>
            </ul>
        </div>
    </div>

    <!-- Resources Screen -->
    <div class="screen" id="resources">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>Resources</h2>
            <p>Tools for your identity journey</p>
        </div>

        <div class="content-card">
            <h3>Identity Scriptures</h3>
            <button class="btn btn-outline btn-full" onclick="showScriptures()">View All Identity Scriptures</button>
            <div id="scripturesList" style="display: none; margin-top: 20px;"></div>
        </div>

        <div class="content-card">
            <h3>Recommended Books</h3>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>📖 "The Search for Significance" - Robert McGee</li>
                <li>📖 "Victory Over the Darkness" - Neil T. Anderson</li>
                <li>📖 "Identity in Christ" - Jerry Bridges</li>
                <li>📖 "Who Do You Think You Are?" - Mark Driscoll</li>
                <li>📖 "The Truest Thing About You" - David Lomas</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Online Resources</h3>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>🌐 Focus on the Family - Identity resources</li>
                <li>🌐 Desiring God - Articles on identity in Christ</li>
                <li>🌐 The Gospel Coalition - Identity and faith</li>
                <li>🌐 RightNow Media - Video studies on identity</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>Download Resources</h3>
            <button class="btn btn-outline btn-full" onclick="downloadResource('affirmations')">31 Days of Identity Affirmations</button>
            <div id="affirmationsContent" class="download-content" style="display: none;"></div>
            
            <button class="btn btn-outline btn-full" style="margin-top: 10px;" onclick="downloadResource('questions')">Identity Discovery Questions</button>
            <div id="questionsContent" class="download-content" style="display: none;"></div>
            
            <button class="btn btn-outline btn-full" style="margin-top: 10px;" onclick="downloadResource('prayers')">Prayers for Identity</button>
            <div id="prayersContent" class="download-content" style="display: none;"></div>
        </div>
    </div>

    <!-- Info Screen -->
    <div class="screen" id="info">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>About This App</h2>
            <p>Your guide to biblical identity</p>
        </div>

        <div class="content-card">
            <h3>What This App Does</h3>
            <p>Beloved Identity helps you discover and embrace your true identity in Christ through:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>• Daily affirmations from Scripture</li>
                <li>• Identity mapping tools</li>
                <li>• Safe space for processing questions</li>
                <li>• Connection to Christian counselors</li>
                <li>• Resources for families</li>
                <li>• Biblical truth about who you are</li>
            </ul>
        </div>

        <div class="content-card">
            <h3>How to Use This App</h3>
            <ol style="line-height: 2; margin-left: 20px;">
                <li>Start with daily affirmations on the home screen</li>
                <li>Explore "Who Am I in Christ?" for biblical truths</li>
                <li>Use Identity Mapping to process feelings</li>
                <li>Discover God's design for your life</li>
                <li>Journal in the Safe Space</li>
                <li>Connect with counselors if needed</li>
                <li>Share family resources with loved ones</li>
            </ol>
        </div>

        <div class="content-card">
            <h3>Privacy & Safety</h3>
            <p>• All data is stored locally on your device</p>
            <p>• No personal information is transmitted</p>
            <p>• Your journal entries remain completely private</p>
            <p>• Safe, judgment-free environment</p>
        </div>

        <div class="content-card">
            <h3>Install on Your Phone</h3>
            <div style="background: var(--accent); padding: 20px; border-radius: 10px;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">iPhone/iPad:</h4>
                <ol style="margin: 10px 0; line-height: 1.6;">
                    <li>Open in Safari browser</li>
                    <li>Tap Share button (square with arrow)</li>
                    <li>Select "Add to Home Screen"</li>
                    <li>Name it "Beloved Identity"</li>
                </ol>
                
                <h4 style="color: var(--primary); margin: 20px 0 10px;">Android:</h4>
                <ol style="margin: 10px 0; line-height: 1.6;">
                    <li>Open in Chrome browser</li>
                    <li>Tap three-dot menu</li>
                    <li>Select "Add to Home Screen"</li>
                    <li>Name it "Beloved Identity"</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- About Screen -->
    <div class="screen" id="about">
        <button class="back-button" onclick="showScreen('dashboard')">← Back to Home</button>
        
        <div class="content-header">
            <h2>About Depths to Heights</h2>
            <p>Biblical hope for life's depths</p>
        </div>

        <div class="content-card">
            <h3>Our Mission</h3>
            <p>Depths to Heights creates biblical mental health resources that meet people in their darkest moments and guide them toward God's light. We believe Scripture offers profound wisdom for every struggle, including identity questions.</p>
        </div>

        <div class="content-card">
            <h3>Created By</h3>
            <p><strong>Made by Justin</strong></p>
            <p>A missionary pastor passionate about helping people discover their true identity in Christ and find freedom from confusion and shame.</p>
        </div>

        <div class="content-card">
            <h3>Contact Information</h3>
            <p><strong>Website:</strong> <a href="https://depthstoheights.org" target="_blank" style="color: var(--primary);">depthstoheights.org</a></p>
            <p><strong>Email:</strong> <a href="mailto:depthstoheights@gmail.com" style="color: var(--primary);">depthstoheights@gmail.com</a></p>
        </div>

        <div class="content-card">
            <h3>Support Our Ministry</h3>
            <p>Your donation helps us create more biblical resources for those struggling with identity and mental health challenges. Every gift makes a difference.</p>
            <button class="btn btn-gold btn-full" onclick="window.open('https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U', '_blank')">Donate via PayPal</button>
        </div>

        <div class="content-card">
            <h3>Our Commitment</h3>
            <p>We are committed to providing:</p>
            <ul style="line-height: 2; margin-left: 20px;">
                <li>✓ Biblical truth with grace</li>
                <li>✓ Safe spaces for processing</li>
                <li>✓ Professional resources</li>
                <li>✓ Support without judgment</li>
                <li>✓ Hope for every journey</li>
            </ul>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="navigateTo('dashboard')">
            <span class="icon">🏠</span>
            <span class="label">Home</span>
        </div>
        <div class="nav-item" onclick="navigateTo('crisis')">
            <span class="icon">🆘</span>
            <span class="label">Crisis</span>
        </div>
        <div class="nav-item" onclick="navigateTo('resources')">
            <span class="icon">📚</span>
            <span class="label">Resources</span>
        </div>
        <div class="nav-item" onclick="navigateTo('info')">
            <span class="icon">ℹ️</span>
            <span class="label">Info</span>
        </div>
        <div class="nav-item" onclick="navigateTo('about')">
            <span class="icon">✨</span>
            <span class="label">About</span>
        </div>
    </div>

    <script>
        // Early function definitions to prevent reference errors
        function startJourney() {
            showScreen('dashboard');
        }

        function navigateTo(screenId) {
            showScreen(screenId);
        }

        // App Data Structure
        let appData = {
            affirmations: [],
            reflections: [],
            identityMap: [],
            designDiscoveries: [],
            safeSpaceJournals: [],
            stats: {
                days: 0,
                truths: 0,
                journals: 0,
                questions: 0
            },
            lastVisit: null,
            currentAffirmationIndex: 0,
            audioPlaying: false
        };

        // Identity Affirmations Database
        const identityAffirmations = [
            { text: "You are God's masterpiece, created in Christ Jesus for good works.", verse: "Ephesians 2:10" },
            { text: "You are chosen by God, holy and dearly loved.", verse: "Colossians 3:12" },
            { text: "You are a child of God, and nothing can separate you from His love.", verse: "Romans 8:38-39" },
            { text: "You are complete in Christ, who is the head over every power and authority.", verse: "Colossians 2:10" },
            { text: "You are God's temple, and His Spirit dwells in you.", verse: "1 Corinthians 3:16" },
            { text: "You are the light of the world, called to shine before others.", verse: "Matthew 5:14" },
            { text: "You are more than a conqueror through Him who loved you.", verse: "Romans 8:37" },
            { text: "You are a new creation; the old has gone, the new has come.", verse: "2 Corinthians 5:17" },
            { text: "You are God's ambassador, representing Christ to the world.", verse: "2 Corinthians 5:20" },
            { text: "You are blessed with every spiritual blessing in Christ.", verse: "Ephesians 1:3" },
            { text: "You are fearfully and wonderfully made by the Creator of the universe.", verse: "Psalm 139:14" },
            { text: "You are redeemed and forgiven of all your sins through Christ's blood.", verse: "Ephesians 1:7" },
            { text: "You are seated with Christ in the heavenly realms.", verse: "Ephesians 2:6" },
            { text: "You are God's workmanship, His poetry in motion.", verse: "Ephesians 2:10" },
            { text: "You are justified by faith and have peace with God.", verse: "Romans 5:1" },
            { text: "You are free from condemnation in Christ Jesus.", verse: "Romans 8:1" },
            { text: "You are an heir of God and co-heir with Christ.", verse: "Romans 8:17" },
            { text: "You are sealed with the promised Holy Spirit.", verse: "Ephesians 1:13" },
            { text: "You are a royal priesthood, a holy nation.", verse: "1 Peter 2:9" },
            { text: "You are God's special possession, declared to show His praises.", verse: "1 Peter 2:9" },
            { text: "You are born of God, and the evil one cannot harm you.", verse: "1 John 5:18" },
            { text: "You are hidden with Christ in God.", verse: "Colossians 3:3" },
            { text: "You are the salt of the earth, bringing flavor and preservation.", verse: "Matthew 5:13" },
            { text: "You are a branch connected to the True Vine.", verse: "John 15:5" },
            { text: "You are Christ's friend, chosen and appointed to bear fruit.", verse: "John 15:15-16" },
            { text: "You are a citizen of heaven, not bound by earthly limitations.", verse: "Philippians 3:20" },
            { text: "You are God's beloved, precious in His sight.", verse: "Isaiah 43:4" },
            { text: "You are strengthened with all power according to His glorious might.", verse: "Colossians 1:11" },
            { text: "You are delivered from the domain of darkness.", verse: "Colossians 1:13" },
            { text: "You are accepted in the Beloved.", verse: "Ephesians 1:6" }
        ];

        // Resource Content
        const resourceContent = {
            affirmations: `31 DAYS OF IDENTITY AFFIRMATIONS IN CHRIST

Day 1: I am created in God's image (Genesis 1:27)
Day 2: I am fearfully and wonderfully made (Psalm 139:14)
Day 3: I am chosen before the foundation of the world (Ephesians 1:4)
Day 4: I am God's child (John 1:12)
Day 5: I am redeemed through His blood (Ephesians 1:7)
Day 6: I am a new creation (2 Corinthians 5:17)
Day 7: I am complete in Christ (Colossians 2:10)
Day 8: I am free from condemnation (Romans 8:1)
Day 9: I am God's masterpiece (Ephesians 2:10)
Day 10: I am the temple of the Holy Spirit (1 Corinthians 6:19)
Day 11: I am justified by faith (Romans 5:1)
Day 12: I am an ambassador for Christ (2 Corinthians 5:20)
Day 13: I am more than a conqueror (Romans 8:37)
Day 14: I am the light of the world (Matthew 5:14)
Day 15: I am the salt of the earth (Matthew 5:13)
Day 16: I am a royal priesthood (1 Peter 2:9)
Day 17: I am seated with Christ in heavenly places (Ephesians 2:6)
Day 18: I am God's workmanship (Ephesians 2:10)
Day 19: I am blessed with every spiritual blessing (Ephesians 1:3)
Day 20: I am hidden with Christ in God (Colossians 3:3)
Day 21: I am an heir of God (Romans 8:17)
Day 22: I am accepted in the Beloved (Ephesians 1:6)
Day 23: I am a branch of the True Vine (John 15:5)
Day 24: I am Christ's friend (John 15:15)
Day 25: I am born of God (1 John 5:1)
Day 26: I am a citizen of heaven (Philippians 3:20)
Day 27: I am God's possession (1 Peter 2:9)
Day 28: I am sealed with the Holy Spirit (Ephesians 1:13)
Day 29: I am loved with an everlasting love (Jeremiah 31:3)
Day 30: I am precious in God's sight (Isaiah 43:4)
Day 31: I am who God says I am (2 Corinthians 5:17)`,

            questions: `IDENTITY DISCOVERY QUESTIONS

WHO AM I?
1. What are three positive qualities others see in me?
2. What brings me the most joy and fulfillment?
3. When do I feel most like myself?
4. What values are most important to me?
5. What unique perspectives do I bring to situations?

WHERE DO I COME FROM?
1. How has my family shaped who I am?
2. What cultural influences have impacted my identity?
3. What life experiences have most defined me?
4. How has my faith journey shaped my identity?
5. What generational patterns do I want to continue or break?

WHERE AM I GOING?
1. What dreams has God placed in my heart?
2. What legacy do I want to leave?
3. How do I want to grow in the next year?
4. What is God calling me to become?
5. What fears are holding me back from my purpose?

WHAT DO I BELIEVE?
1. What do I believe about God?
2. What do I believe about myself?
3. What do I believe about my purpose?
4. What do I believe about my worth?
5. What lies do I need to stop believing?

HOW DO I RELATE?
1. How do I show love to others?
2. What do I need in relationships?
3. How do I handle conflict?
4. What boundaries do I need to set?
5. How can I better reflect Christ in relationships?`,

            prayers: `PRAYERS FOR IDENTITY IN CHRIST

PRAYER FOR SELF-ACCEPTANCE
Lord, help me see myself through Your eyes. Remove the distorted mirrors of comparison, criticism, and condemnation. Help me embrace how You've made me, trusting that Your design is perfect. Give me courage to be authentically who You created me to be. Amen.

PRAYER FOR CLARITY
Father, the questions about my identity feel overwhelming. I don't understand everything about myself, and that scares me. Please give me clarity where I need it and peace with the mysteries that remain. Help me trust Your timing in revealing Your purposes. Amen.

PRAYER FOR FREEDOM FROM LABELS
Jesus, I've been defined by so many labels - some I've given myself, others that were placed on me. Free me from every label that doesn't align with Your truth. Help me find my identity solely in You, not in what I do, how I look, or what others think. Amen.

PRAYER FOR HEALING
Healer of my soul, touch the wounded places that have distorted my identity. Heal the rejection, abuse, abandonment, and betrayal. Restore what was stolen and rebuild what was broken. Make me whole in You. Amen.

PRAYER FOR PURPOSE
God, reveal the purpose for which You created me. Show me the good works You've prepared in advance for me to do. Help me understand my unique calling and give me courage to walk in it, even when the path seems unclear. Amen.

PRAYER FOR TRANSFORMATION
Lord, transform me from the inside out. Renew my mind with Your truth. Change my heart to reflect Yours. Help me become more like Christ every day, embracing the identity You've given me as Your beloved child. Amen.

PRAYER FOR PARENTS
Father, give me wisdom to guide my child through identity questions. Help me love unconditionally, listen without judgment, and speak truth with grace. Show me when to step in and when to step back. Above all, help me point them to You. Amen.`
        };

        // Scripture Lists
        const identityScriptures = [
            { category: "Created & Chosen", verses: [
                "Genesis 1:27 - Created in God's image",
                "Psalm 139:13-16 - Knit together in the womb",
                "Ephesians 1:4 - Chosen before creation",
                "Isaiah 43:1 - Called by name",
                "Jeremiah 1:5 - Known before birth"
            ]},
            { category: "Loved & Valued", verses: [
                "John 3:16 - Loved by God",
                "Romans 5:8 - Loved while still sinners",
                "1 John 3:1 - Lavished with love",
                "Isaiah 43:4 - Precious and honored",
                "Zephaniah 3:17 - Delighted in with singing"
            ]},
            { category: "Redeemed & Forgiven", verses: [
                "Ephesians 1:7 - Redeemed through blood",
                "Colossians 1:14 - Forgiven of sins",
                "Isaiah 44:22 - Sins swept away",
                "Psalm 103:12 - Sins removed far",
                "1 John 1:9 - Cleansed from unrighteousness"
            ]},
            { category: "New Creation", verses: [
                "2 Corinthians 5:17 - New creation in Christ",
                "Galatians 2:20 - Christ lives in me",
                "Romans 6:4 - Walk in newness of life",
                "Ephesians 4:24 - Put on new self",
                "Colossians 3:10 - Renewed in knowledge"
            ]},
            { category: "Empowered & Equipped", verses: [
                "Philippians 4:13 - Can do all things",
                "2 Timothy 1:7 - Spirit of power",
                "Ephesians 3:20 - Power working within",
                "2 Peter 1:3 - Everything needed for life",
                "1 Corinthians 12:7 - Given spiritual gifts"
            ]}
        ];

        // Initialize App
        function initApp() {
            loadData();
            updateDashboard();
            displayDailyAffirmation();
        }

        // Load saved data
        function loadData() {
            const saved = localStorage.getItem('belovedIdentityData');
            if (saved) {
                try {
                    appData = JSON.parse(saved);
                } catch (e) {
                    console.log('Error loading saved data');
                }
            }
            
            // Update last visit
            const today = new Date().toDateString();
            if (appData.lastVisit !== today) {
                appData.lastVisit = today;
                appData.stats.days++;
                saveData();
            }
        }

        // Save data
        function saveData() {
            localStorage.setItem('belovedIdentityData', JSON.stringify(appData));
        }

        // Navigation
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const screen = document.getElementById(screenId);
            if (screen) {
                screen.classList.add('active');
                updateBottomNav(screenId);
                window.scrollTo(0, 0);
            }
        }

        function updateBottomNav(screenId) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navMap = {
                'dashboard': 0,
                'openingScreen': 0,
                'crisis': 1,
                'resources': 2,
                'info': 3,
                'about': 4
            };
            
            const navIndex = navMap[screenId];
            if (navIndex !== undefined) {
                document.querySelectorAll('.nav-item')[navIndex].classList.add('active');
            }
        }

        // Dashboard Functions
        function updateDashboard() {
            // Update date
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('dashboardDate').textContent = now.toLocaleDateString('en-US', options);
            
            // Update stats
            document.getElementById('daysCount').textContent = appData.stats.days || 0;
            document.getElementById('truthsCount').textContent = appData.stats.truths || 0;
            document.getElementById('journalCount').textContent = appData.stats.journals || 0;
            document.getElementById('questionsCount').textContent = appData.stats.questions || 0;
            
            // Update progress bar
            const progress = Math.min(((appData.stats.days * 10) + (appData.stats.truths * 5) + (appData.stats.journals * 3)) / 100 * 100, 100);
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Affirmation Functions
        function displayDailyAffirmation() {
            const affirmation = identityAffirmations[appData.currentAffirmationIndex];
            const affirmationDiv = document.getElementById('dailyAffirmation');
            if (affirmationDiv) {
                affirmationDiv.innerHTML = `
                    <p>${affirmation.text}</p>
                    <cite>${affirmation.verse}</cite>
                `;
            }
        }

        function getNewAffirmation() {
            appData.currentAffirmationIndex = (appData.currentAffirmationIndex + 1) % identityAffirmations.length;
            appData.stats.truths++;
            saveData();
            displayDailyAffirmation();
            updateDashboard();
            showMessage('New affirmation loaded!', 'success');
        }

        // Identity Reflection
        function saveIdentityReflection() {
            const reflection = document.getElementById('identityReflection').value.trim();
            
            if (!reflection) {
                showMessage('Please write your reflection', 'warning');
                return;
            }
            
            appData.reflections.push({
                id: Date.now(),
                content: reflection,
                date: new Date().toISOString()
            });
            
            appData.stats.journals++;
            saveData();
            updateDashboard();
            
            document.getElementById('identityReflection').value = '';
            showMessage('Reflection saved!', 'success');
        }

        // Identity Mapping
        function addToMap() {
            const feeling = document.getElementById('feelingInput').value.trim();
            const truth = document.getElementById('truthInput').value.trim();
            
            if (!feeling || !truth) {
                showMessage('Please fill in both fields', 'warning');
                return;
            }
            
            appData.identityMap.push({
                id: Date.now(),
                feeling: feeling,
                truth: truth,
                date: new Date().toISOString()
            });
            
            saveData();
            displayPersonalMap();
            
            document.getElementById('feelingInput').value = '';
            document.getElementById('truthInput').value = '';
            showMessage('Added to your identity map!', 'success');
        }

        function displayPersonalMap() {
            const mapDiv = document.getElementById('personalMap');
            
            if (appData.identityMap.length === 0) {
                mapDiv.innerHTML = '<p style="color: var(--light-text); text-align: center;">Your personal map will appear here</p>';
                return;
            }
            
            mapDiv.innerHTML = '<h4 style="margin-top: 20px;">Your Personal Identity Map</h4>' +
                appData.identityMap.map(item => `
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                        <div style="background: #FEE2E2; padding: 12px; border-radius: 8px; border-left: 3px solid #EF4444;">
                            <strong>Feeling:</strong> ${item.feeling}
                        </div>
                        <div style="background: var(--accent); padding: 12px; border-radius: 8px; border-left: 3px solid var(--gold);">
                            <strong>Truth:</strong> ${item.truth}
                        </div>
                    </div>
                `).join('');
        }

        // God's Design Discovery
        function saveDesignDiscovery() {
            const joy = document.getElementById('joyInput').value.trim();
            const gifts = document.getElementById('giftsInput').value.trim();
            const burdens = document.getElementById('burdensInput').value.trim();
            const experiences = document.getElementById('experiencesInput').value.trim();
            
            if (!joy && !gifts && !burdens && !experiences) {
                showMessage('Please fill in at least one field', 'warning');
                return;
            }
            
            appData.designDiscoveries.push({
                id: Date.now(),
                joy: joy,
                gifts: gifts,
                burdens: burdens,
                experiences: experiences,
                date: new Date().toISOString()
            });
            
            appData.stats.journals++;
            saveData();
            updateDashboard();
            
            // Clear form
            document.getElementById('joyInput').value = '';
            document.getElementById('giftsInput').value = '';
            document.getElementById('burdensInput').value = '';
            document.getElementById('experiencesInput').value = '';
            
            showMessage('Your design discovery has been saved!', 'success');
        }

        // Safe Space Journal
        function saveSafeSpaceJournal() {
            const questions = document.getElementById('questionsJournal').value.trim();
            const fears = document.getElementById('fearsJournal').value.trim();
            const wish = document.getElementById('wishJournal').value.trim();
            
            if (!questions && !fears && !wish) {
                showMessage('Please write something in at least one field', 'warning');
                return;
            }
            
            const entry = {
                id: Date.now(),
                questions: questions,
                fears: fears,
                wish: wish,
                date: new Date().toISOString()
            };
            
            appData.safeSpaceJournals.push(entry);
            appData.stats.journals++;
            appData.stats.questions++;
            saveData();
            updateDashboard();
            displaySafeSpaceEntries();
            
            // Clear form
            document.getElementById('questionsJournal').value = '';
            document.getElementById('fearsJournal').value = '';
            document.getElementById('wishJournal').value = '';
            
            showMessage('Your thoughts have been safely saved', 'success');
        }

        function displaySafeSpaceEntries() {
            const entriesDiv = document.getElementById('safeSpaceEntries');
            
            if (!appData.safeSpaceJournals || appData.safeSpaceJournals.length === 0) {
                entriesDiv.innerHTML = '<p style="color: var(--light-text); text-align: center;">No journal entries yet</p>';
                return;
            }
            
            entriesDiv.innerHTML = appData.safeSpaceJournals.slice(-5).reverse().map(entry => `
                <div class="journal-entry">
                    <div class="date">${new Date(entry.date).toLocaleString()}</div>
                    <div class="content">
                        ${entry.questions ? `<p><strong>Questions:</strong> ${entry.questions}</p>` : ''}
                        ${entry.fears ? `<p><strong>Fears:</strong> ${entry.fears}</p>` : ''}
                        ${entry.wish ? `<p><strong>Wishes:</strong> ${entry.wish}</p>` : ''}
                    </div>
                    <button class="delete-btn" onclick="deleteSafeSpaceEntry(${entry.id})">Delete Entry</button>
                </div>
            `).join('');
        }

        function deleteSafeSpaceEntry(id) {
            appData.safeSpaceJournals = appData.safeSpaceJournals.filter(e => e.id !== id);
            saveData();
            displaySafeSpaceEntries();
            showMessage('Entry deleted', 'info');
        }

        // Counselor Functions
        function searchCounselors() {
            const location = document.getElementById('counselorLocation').value.trim();
            const specialty = document.getElementById('counselorSpecialty').value;
            
            if (!location) {
                showMessage('Please enter your location', 'warning');
                return;
            }
            
            const resultsDiv = document.getElementById('counselorResults');
            resultsDiv.innerHTML = `
                <div class="counselor-card">
                    <h4>Search Results for: ${location}</h4>
                    <p><strong>Specialty:</strong> ${specialty || 'General Identity Questions'}</p>
                    <p style="margin-top: 15px;">To find Christian counselors in your area:</p>
                    <ul style="line-height: 2; margin: 15px 0;">
                        <li>• Search online for "Christian counselors ${location}"</li>
                        <li>• Contact local churches for referrals</li>
                        <li>• Check the Christian Counselors Network</li>
                        <li>• Ask your pastor for recommendations</li>
                        <li>• Look for counselors who integrate faith and therapy</li>
                    </ul>
                    <p style="color: var(--primary); font-weight: 600;">Remember: Seeking help is a sign of strength, not weakness.</p>
                </div>
            `;
            
            showMessage('Counselor search guidance provided', 'success');
        }

        function showCounselorInfo(type) {
            const info = {
                betterhelp: "BetterHelp offers online Christian counseling with licensed therapists. Visit their website and specify you want a Christian counselor who specializes in identity issues.",
                faithful: "Faithful Counseling provides professional, faith-based therapy online. They match you with counselors who share your faith values.",
                ccn: "The Christian Counselors Network maintains a directory of certified Christian counselors. Search by location and specialty on their website."
            };
            
            showMessage(info[type], 'info');
        }

        // Resource Functions
        function showScriptures() {
            const listDiv = document.getElementById('scripturesList');
            
            if (listDiv.style.display === 'none') {
                listDiv.style.display = 'block';
                listDiv.innerHTML = identityScriptures.map(category => `
                    <div style="margin: 20px 0;">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">${category.category}</h4>
                        <ul style="line-height: 2; margin-left: 20px;">
                            ${category.verses.map(verse => `<li>${verse}</li>`).join('')}
                        </ul>
                    </div>
                `).join('');
            } else {
                listDiv.style.display = 'none';
            }
        }

        function downloadResource(type) {
            const contentMap = {
                affirmations: 'affirmationsContent',
                questions: 'questionsContent',
                prayers: 'prayersContent'
            };
            
            const contentDiv = document.getElementById(contentMap[type]);
            
            if (contentDiv.style.display === 'none') {
                // Hide other content
                Object.values(contentMap).forEach(id => {
                    document.getElementById(id).style.display = 'none';
                });
                
                // Show selected content
                contentDiv.style.display = 'block';
                contentDiv.innerHTML = `
                    <div style="background: white; padding: 20px; border-radius: 10px; margin-top: 15px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">
                            ${type === 'affirmations' ? '31 Days of Identity Affirmations' : 
                              type === 'questions' ? 'Identity Discovery Questions' : 
                              'Prayers for Identity'}
                        </h4>
                        <pre style="white-space: pre-wrap; line-height: 1.8; font-family: 'Inter', sans-serif;">
${resourceContent[type]}
                        </pre>
                        <button class="btn btn-secondary" onclick="copyResource('${type}')">Copy to Clipboard</button>
                        <button class="btn btn-outline" onclick="printResource('${type}')" style="margin-left: 10px;">Print</button>
                    </div>
                `;
            } else {
                contentDiv.style.display = 'none';
            }
        }

        function copyResource(type) {
            navigator.clipboard.writeText(resourceContent[type]).then(() => {
                showMessage('Resource copied to clipboard!', 'success');
            }).catch(() => {
                showMessage('Could not copy resource', 'warning');
            });
        }

        function printResource(type) {
            const printWindow = window.open('', '_blank');
            const title = type === 'affirmations' ? '31 Days of Identity Affirmations' : 
                         type === 'questions' ? 'Identity Discovery Questions' : 
                         'Prayers for Identity';
            
            printWindow.document.write(`
                <html>
                <head>
                    <title>${title}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.8; }
                        h1 { color: #6B46C1; }
                        pre { white-space: pre-wrap; }
                    </style>
                </head>
                <body>
                    <h1>${title}</h1>
                    <pre>${resourceContent[type]}</pre>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function copyPrayer() {
            const prayer = "Lord, reveal to me the purpose for which You created me. Show me how You've uniquely designed me to serve You and others. Help me embrace the way You've made me, trusting that Your design is perfect. Give me courage to walk in the purpose You've prepared for me. In Jesus' name, Amen.";
            
            navigator.clipboard.writeText(prayer).then(() => {
                showMessage('Prayer copied to clipboard!', 'success');
            }).catch(() => {
                showMessage('Could not copy prayer', 'warning');
            });
        }

        function copyParentPrayer() {
            const prayer = `Heavenly Father,

Give me wisdom to parent with Your love. Help me see my child through Your eyes - fearfully and wonderfully made. When I don't understand, give me patience. When I'm afraid, give me peace. Help me create a home where my child feels safe, loved, and valued. Guide our family through this journey, keeping us united in love. Show me how to point my child to You while respecting their process. In Jesus' name, Amen.`;
            
            navigator.clipboard.writeText(prayer).then(() => {
                showMessage('Prayer copied to clipboard!', 'success');
            }).catch(() => {
                showMessage('Could not copy prayer', 'warning');
            });
        }

        // Audio Toggle
        document.getElementById('audioToggle').addEventListener('click', function() {
            const audio = document.getElementById('backgroundAudio');
            appData.audioPlaying = !appData.audioPlaying;
            this.classList.toggle('playing');
            document.getElementById('audioIcon').textContent = appData.audioPlaying ? '🔇' : '🎵';
            
            if (appData.audioPlaying) {
                audio.play().catch(() => {
                    showMessage('Audio requires user interaction to play', 'info');
                });
                showMessage('Peaceful music playing', 'info');
            } else {
                audio.pause();
                showMessage('Music paused', 'info');
            }
        });

        // Message System
        function showMessage(text, type = 'info') {
            const message = document.createElement('div');
            message.className = `message ${type}`;
            message.textContent = text;
            
            const activeScreen = document.querySelector('.screen.active');
            if (activeScreen) {
                // Remove existing messages
                const existingMessage = activeScreen.querySelector('.message');
                if (existingMessage) {
                    existingMessage.remove();
                }
                
                // Insert after back button or at beginning
                const backButton = activeScreen.querySelector('.back-button');
                if (backButton) {
                    backButton.insertAdjacentElement('afterend', message);
                } else {
                    activeScreen.insertBefore(message, activeScreen.firstChild);
                }
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    message.remove();
                }, 5000);
            }
        }

        // Initialize on load
        window.addEventListener('load', function() {
            initApp();
            
            // Load safe space entries if on that screen
            if (document.getElementById('safeSpaceEntries')) {
                displaySafeSpaceEntries();
            }
            
            // Load personal map if on that screen
            if (document.getElementById('personalMap')) {
                displayPersonalMap();
            }
            
            // Auto-save every 30 seconds
            setInterval(saveData, 30000);
            
            // Save on unload
            window.addEventListener('beforeunload', saveData);
        });

        // Prevent double-tap zoom on iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
            